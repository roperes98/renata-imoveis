/* Contract Editor Styles */
.ProseMirror {
  outline: none;
}

/* Page styling for Pagination Plus */
.tiptap.rm-with-pagination {
  background-color: white;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  /* Shadow-md like */
  margin: 0 auto;
  /* Center the page */
}

/* Ensure the gap looks like a break (matches the container bg) */
.rm-pagination-gap {
  background-color: #f3f4f6 !important;
  /* bg-gray-100 */
}

/* Footer layout fixes for full expansion */
.rm-page-footer-left {
  display: flex;
  flex: 1;
}

.rm-page-footer-content {
  display: flex !important;
  width: 100%;
}

/* Standard Paragraph Layout with Auto-Numbering for Clauses */
.prose .contract-clauses,
.contract-clauses {
  counter-reset: clause-counter !important;
  list-style: none !important;
  padding-left: 0;
  margin-top: 1em;
  margin-bottom: 1em;
}

/* Reset counter for nested lists */
.prose .contract-clauses ol,
.contract-clauses ol {
  counter-reset: clause-counter !important;
  padding-left: 20px;
  /* Indentation for sub-clauses */
  list-style: none !important;

  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

/* Signature Table Layout */
.signature-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 1em;
  margin-bottom: 2em;
  border: none;
  table-layout: fixed;
  /* Forces columns to respect width */
}

.signature-cell {
  width: 50%;
  vertical-align: bottom;
  padding-bottom: 2rem;
  padding-right: 2rem;
  border: none;
}

.signature-line {
  white-space: nowrap;
  overflow: hidden;
  display: block;
  margin-bottom: 0.25rem;
  font-weight: normal;
  margin-top: 3em;
  /* Ensure underscores aren't bolded if inside strong context */
}

.signature-name {
  font-size: 0.9em;
  font-weight: bold;
  line-height: 1.2;
  margin-bottom: 0 !important;
}

.signature-subtext {
  font-size: 0.9em;
  font-weight: normal;
  display: block;
  margin-top: 0 !important;
}


/* Increment counter for all list items */
.prose .contract-clauses li,
.contract-clauses li {
  counter-increment: clause-counter !important;
  margin-bottom: 1em;
  /* Reduced from 2em for better nesting spacing */
  display: block;
}

/* TOP LEVEL: "CLÁUSULA I -" */
.ProseMirror .prose .contract-clauses>li>p:first-child::before,
.ProseMirror .contract-clauses>li>p:first-child::before,
.prose .contract-clauses>li>p:first-child::before,
.contract-clauses>li>p:first-child::before {
  content: "CLÁUSULA " counter(clause-counter, upper-roman) " - " !important;
  font-weight: bold;
  font-family: inherit;
  color: var(--tw-prose-body);
}

/* NESTED LEVELS: "I.I -" */
.ProseMirror .prose .contract-clauses ol li>p:first-child::before,
.ProseMirror .contract-clauses ol li>p:first-child::before,
.prose .contract-clauses ol li>p:first-child::before,
.contract-clauses ol li>p:first-child::before {
  content: counters(clause-counter, ".", upper-roman) " - " !important;
  font-weight: bold;
  font-family: inherit;
  color: var(--tw-prose-body);
}

.prose .contract-clauses li p,
.contract-clauses li p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  display: block;
  width: 100%;
  word-break: break-all;
  overflow-wrap: break-word;
  hyphens: auto;
}


/* Ensure default markers are hidden */
.prose .contract-clauses li::marker,
.contract-clauses li::marker,
.prose .contract-clauses li::before,
.contract-clauses li::before {
  display: none !important;
  content: "" !important;
}

.ProseMirror blockquote {
  border-left: 3px solid #e5e7eb;
  /* gray-200 */
  padding-left: 1rem;
  font-style: italic;
  margin-left: 0;
  margin-right: 0;
}

.ProseMirror h1 {
  font-family: Georgia, 'Times New Roman', serif;
  font-size: 14px;
  font-weight: 800;
  text-transform: uppercase;
  margin-top: 0.8em;
  margin-bottom: 1.2em;
  line-height: 1.5;
  text-align: center;
}

.ProseMirror h2 {
  font-family: Georgia, 'Times New Roman', serif;
  font-size: 13px;
  font-weight: bold;
  margin-top: 0.83em;
  margin-bottom: 0.83em;
  line-height: 1.3;
  text-align: left;
}

.ProseMirror h3 {
  font-family: Georgia, 'Times New Roman', serif;
  font-size: 12px;
  font-weight: bold;
  margin-top: 1em;
  margin-bottom: 1em;
  line-height: 1.4;
  text-align: left;
}

.ProseMirror h4 {
  font-family: Georgia, 'Times New Roman', serif;
  font-size: 12px;
  font-weight: bold;
  margin-top: 1em;
  margin-bottom: 1em;
  line-height: 1.4;
  text-align: left;
}

/* Bullet List Styles */
.ProseMirror ul:not(.contract-clauses) {
  list-style-type: disc;
  padding-left: 1.5rem;
  margin-top: 1em;
  margin-bottom: 1em;
}

.ProseMirror ul:not(.contract-clauses) ul {
  list-style-type: circle;
}

.ProseMirror ul:not(.contract-clauses) ul ul {
  list-style-type: square;
}

.ProseMirror ul:not(.contract-clauses) li {
  display: list-item;
  margin-bottom: 0.5em;
}

/* Standard Ordered List Styles (Nested 1.1) */
/* Standard Ordered List Styles (Nested 1.1) */
/* Explicitly exclude .contract-clauses */
.ProseMirror ol:not(.contract-clauses) {
  counter-reset: standard-counter;
  list-style: none !important;
  /* Disable default markers */
  padding-left: 1.5rem;
  margin-top: 1em;
  margin-bottom: 1em;
}

.ProseMirror ol:not(.contract-clauses) li {
  counter-increment: standard-counter;
  display: block;
  margin-bottom: 0.5em;
  position: relative;
}

.ProseMirror ol:not(.contract-clauses) li>p:first-child::before {
  content: counters(standard-counter, ".") ". ";
  /* Output: 1. or 1.1. */
  font-variant-numeric: tabular-nums;
  margin-right: 0.25em;
  color: inherit;
}

/* Nested Standard OL reset */
.ProseMirror ol:not(.contract-clauses) ol {
  counter-reset: standard-counter;
  padding-left: 1.5rem;
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

@media print {
  @page {
    margin: 0mm;
    /* Reset to 0 to hide browser header/footer and match A4 pixels */
    size: A4;
    /* Force A4 size */
  }

  html,
  body {
    height: auto !important;
    width: 210mm !important;
    /* Force exact A4 width */
    overflow: visible !important;
    background: white !important;
    font-size: 12pt;
    margin: 0 !important;
  }

  /* Hide everything by default if not inside print-content-only? 
     No, let's just hide specific UI elements via .no-print classes
     and let everything else flow. 
  */

  /* Hide specific UI text/elements */
  .no-print,
  .drag-handle,
  .tiptap-bubble-menu,
  nav,
  header,
  aside,
  .ContractToolbar,
  /* Assuming class name */
  button {
    display: none !important;
  }

  /* Hide scrollbars in print to avoid them appearing in output */
  ::-webkit-scrollbar {
    display: none;
  }

  /* Main content area */
  .print-content-only {
    display: block !important;
    width: 210mm !important;
    /* Precise A4 width */
    max-width: 210mm !important;
    box-sizing: border-box !important;
    margin: 0 !important;
    padding: 0 11mm 0 15mm !important;
    /* Add side margins (left/right) */
    overflow: visible !important;
    height: auto !important;
  }

  /* Ensure parents allow scrolling/overflow so content isn't clipped */
  .flex,
  .h-full,
  .overflow-hidden {
    overflow: visible !important;
    height: auto !important;
  }

  /* Adjust Tiptap editor for print */
  .tiptap.rm-with-pagination {
    border: none !important;
    box-shadow: none !important;
    margin: 0 !important;
    padding: 0 !important;
    width: 100% !important;
    min-height: 0 !important;
  }

  /* Use the pagination gap as a FORCE PAGE BREAK */
  .rm-pagination-gap {
    display: block !important;
    height: 0 !important;
    min-height: 0 !important;
    border: none !important;
    margin: 0 !important;
    padding: 0 !important;
    page-break-before: always !important;
    break-before: page !important;
    visibility: hidden;
  }

  /* Ensure page breaks happen if needed, though pagination extension handles some of this */
  .page-break {
    break-before: page;
    page-break-before: always;
  }
}